{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, createContext, useContext, useEffect } from 'react';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createStackNavigator } from '@react-navigation/stack';\nimport View from \"react-native-web/dist/exports/View\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { auth } from \"./config/firebase\";\nimport Login from \"./screens/Login\";\nimport Signup from \"./screens/Signup\";\nimport Home from \"./screens/Home\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Stack = createStackNavigator();\nvar AuthenticatedUserContext = createContext({});\nvar AuthenticatedUserProvider = function AuthenticatedUserProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    user = _useState2[0],\n    setUser = _useState2[1];\n  return _jsx(AuthenticatedUserContext.Provider, {\n    value: {\n      user: user,\n      setUser: setUser\n    },\n    children: children\n  });\n};\nfunction ChatStack() {\n  return _jsx(Stack.Navigator, {\n    defaultScreenOptions: Home,\n    children: _jsx(Stack.Screen, {\n      name: \"Home\",\n      component: Home\n    })\n  });\n}\nfunction AuthStack() {\n  return _jsxs(Stack.Navigator, {\n    screenOptions: {\n      headerShown: false\n    },\n    children: [_jsx(Stack.Screen, {\n      name: \"Login\",\n      component: Login\n    }), _jsx(Stack.Screen, {\n      name: \"Signup\",\n      component: Signup\n    })]\n  });\n}\nfunction RootNavigator() {\n  var _useContext = useContext(AuthenticatedUserContext),\n    user = _useContext.user,\n    setUser = _useContext.setUser;\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isLoading = _useState4[0],\n    setIsLoading = _useState4[1];\n  useEffect(function () {\n    var unsubscribeAuth = onAuthStateChanged(auth, function () {\n      var _ref2 = _asyncToGenerator(function* (authenticatedUser) {\n        authenticatedUser ? setUser(authenticatedUser) : setUser(null);\n        setIsLoading(false);\n      });\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n    return unsubscribeAuth;\n  }, [user]);\n  if (isLoading) {\n    return _jsx(View, {\n      style: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center'\n      },\n      children: _jsx(ActivityIndicator, {\n        size: \"large\"\n      })\n    });\n  }\n  return _jsx(NavigationContainer, {\n    children: user ? _jsx(ChatStack, {}) : _jsx(AuthStack, {})\n  });\n}\nexport default function App() {\n  return _jsx(AuthenticatedUserProvider, {\n    children: _jsx(RootNavigator, {})\n  });\n}","map":{"version":3,"names":["React","useState","createContext","useContext","useEffect","NavigationContainer","createStackNavigator","View","ActivityIndicator","onAuthStateChanged","auth","Login","Signup","Home","jsx","_jsx","jsxs","_jsxs","Stack","AuthenticatedUserContext","AuthenticatedUserProvider","_ref","children","_useState","_useState2","_slicedToArray","user","setUser","Provider","value","ChatStack","Navigator","defaultScreenOptions","Screen","name","component","AuthStack","screenOptions","headerShown","RootNavigator","_useContext","_useState3","_useState4","isLoading","setIsLoading","unsubscribeAuth","_ref2","_asyncToGenerator","authenticatedUser","_x","apply","arguments","style","flex","justifyContent","alignItems","size","App"],"sources":["/Users/guillaumepevrier/Projets/MesProjets/AppNBFC/App.js"],"sourcesContent":["import React, { useState, createContext, useContext, useEffect } from 'react';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createStackNavigator } from '@react-navigation/stack';\nimport { View, ActivityIndicator } from 'react-native';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { auth } from './config/firebase';\nimport Login from './screens/Login';\nimport Signup from './screens/Signup';\nimport Home from './screens/Home';\n\nconst Stack = createStackNavigator();\nconst AuthenticatedUserContext = createContext({});\n\nconst AuthenticatedUserProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\nreturn (\n    <AuthenticatedUserContext.Provider value={{ user, setUser }}>\n      {children}\n    </AuthenticatedUserContext.Provider>\n  );\n};\n\nfunction ChatStack() {\n  return (\n    <Stack.Navigator defaultScreenOptions={Home}>\n      <Stack.Screen name='Home' component={Home} />\n    </Stack.Navigator>\n  );\n}\n\nfunction AuthStack() {\n  return (\n    <Stack.Navigator screenOptions={{ headerShown: false }}>\n      <Stack.Screen name='Login' component={Login} />\n      <Stack.Screen name='Signup' component={Signup} />\n    </Stack.Navigator>\n  );\n}\n\nfunction RootNavigator() {\n  const { user, setUser } = useContext(AuthenticatedUserContext);\n  const [isLoading, setIsLoading] = useState(true);\nuseEffect(() => {\n    // onAuthStateChanged returns an unsubscriber\n    const unsubscribeAuth = onAuthStateChanged(\n      auth,\n      async authenticatedUser => {\n        authenticatedUser ? setUser(authenticatedUser) : setUser(null);\n        setIsLoading(false);\n      }\n    );\n// unsubscribe auth listener on unmount\n    return unsubscribeAuth;\n  }, [user]);\nif (isLoading) {\n    return (\n      <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n        <ActivityIndicator size='large' />\n      </View>\n    );\n  }\n\nreturn (\n    <NavigationContainer>\n      {user ? <ChatStack /> : <AuthStack />}\n    </NavigationContainer>\n  );\n}\n\nexport default function App() {\n  return (\n    <AuthenticatedUserProvider>\n      <RootNavigator />\n    </AuthenticatedUserProvider>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}